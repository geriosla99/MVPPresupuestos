<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Dashboard | Presupuesto Personal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../static/styles/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>
  <div class="layout-container">
    <div class="sidebar">
      <h5>üí° Consejo Financiero</h5>
      <div id="advice" class="advice-box">Cargando consejo...</div>
    </div>
    <div class="dashboard-container">
      <h2>Panel de Presupuesto Personal</h2>
      <div class="summary">
        Bienvenido, aqu√≠ puedes registrar tus <b>ingresos</b> y <b>gastos</b> personales.<br>
        Lleva el control de tus finanzas y visualiza cu√°nto ahorras cada mes.
      </div>
      <div class="justify-content-around mb-3 d-flex ">
        <button type="button" class="btn btn-success mx-2" data-bs-toggle="modal" data-bs-target="#simuladorModal">
          Crear Presupuesto
        </button>
        <button class="btn btn-info mx-2" id="descargarExcel">üì• Exportar a Excel</button>
        <button class="btn btn-secondary mx-2" id="simularAhorro" data-bs-toggle="modal"
          data-bs-target="#modalSimulador">
          Simular ahorro
        </button>

      </div>
      <div class="financial-summary">
        <p><strong>Ingresos:</strong> $<span id="totalIngresos">0</span></p>
        <p><strong>Gastos:</strong> $<span id="totalGastos">0</span></p>
        <p><strong>Ahorro:</strong> $<span id="totalAhorro">0</span></p>
      </div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Categor√≠a</th>
            <th>Fecha</th>
            <th>Tipo</th>
            <th>Monto</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="transaction-table">

        </tbody>
      </table>
    </div>
    <div class="sidebar">
      <h5>‚ú® Frase Motivacional</h5>
      <div id="quote" class="advice-box">Cargando frase...</div>
    </div>
  </div>

  <div class="modal fade" id="modalPresupuesto" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Nuevo Presupuesto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <!-- Nombre y fecha -->
          <div class="mb-3">
            <label class="form-label">Nombre del presupuesto</label>
            <input type="text" id="nombrePresupuesto" class="form-control">
          </div>

          <div class="mb-3">
            <label class="form-label">Fecha</label>
            <input type="date" id="fechaPresupuesto" class="form-control">
          </div>

          <div class="mb-3">
            <label class="form-label">Tipo</label>
            <select class="form-select tipo-item" id="tipoPresupuesto">
              <option value="">Seleccione aqu√≠</option>
              <option value="ingreso">Ingreso</option>
              <option value="gasto">Gasto</option>
            </select>
          </div>

          <!-- Tabla de √≠tems -->
          <h6>√çtems</h6>
          <table class="table table-bordered" id="tablaItems">
            <thead>
              <tr>
                <th>Descripci√≥n</th>
                <th>Monto</th>
                <th>Tipo</th>
                <th>Acci√≥n</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button type="button" class="btn btn-success" id="agregarItem">+ Agregar √çtem</button>

          <!-- Total -->
          <div class="mt-3">
            <strong>Total: $<span id="totalPresupuesto">0</span></strong>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="guardarPresupuesto">Guardar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL VER -->
  <div class="modal fade" id="modalVer" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Detalle del Presupuesto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p><strong>Nombre:</strong> <span id="verNombre"></span></p>
          <p><strong>Fecha:</strong> <span id="verFecha"></span></p>
          <p><strong>Tipo:</strong> <span id="verTipo"></span></p>
          <h6>√çtems</h6>
          <ul id="verItems"></ul>
          <p><strong>Total:</strong> $<span id="verTotal"></span></p>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL EDITAR -->
  <div class="modal fade" id="modalEditar" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Editar Presupuesto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Nombre del presupuesto</label>
            <input type="text" id="editarNombre" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Fecha</label>
            <input type="date" id="editarFecha" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Total</label>
            <input type="number" id="editarTotal" class="form-control" disabled>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="guardarEdicion">Guardar cambios</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL ELIMINAR -->
  <div class="modal fade" id="modalEliminar" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Confirmar eliminaci√≥n</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>¬øSeguro que deseas eliminar este presupuesto?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-danger" id="confirmarEliminar">Eliminar</button>
        </div>
      </div>
    </div>
  </div>
  <!-- MODAL DE BIENVENIDA (mostrar solo 1¬™ vez) -->
  <div class="modal fade" id="welcomeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="welcomeTitle">Bienvenida</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div id="welcomeStepContent">
            <!-- Contenido din√°mico de pasos -->
          </div>
          <div class="mt-3">
            <small id="welcomeProgress" class="text-muted"></small>
          </div>
        </div>
        <div class="modal-footer">
          <button id="welcomePrev" type="button" class="btn btn-outline-secondary">Anterior</button>
          <button id="welcomeNext" type="button" class="btn btn-primary">Siguiente</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal simulador -->
  <div class="modal fade" id="simuladorModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Simulador de Ahorro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="metaAhorro" class="form-label">Meta de ahorro ($)</label>
            <input type="number" id="metaAhorro" class="form-control">
          </div>

          <div class="mb-3">
            <label for="modoSimulador" class="form-label">Quiero calcular por:</label>
            <select id="modoSimulador" class="form-select">
              <option value="">Seleccione aqu√≠</option>
              <option value="meses">Meta + meses</option>
              <option value="ahorroMensual">Meta + ahorro mensual</option>
            </select>
          </div>

          <!-- Campo si elige calcular por meses -->
          <div id="campoMeses" class="mb-3">
            <label for="mesesDeseados" class="form-label">Meses</label>
            <input type="number" id="mesesDeseados" class="form-control">
          </div>

          <!-- Campo si elige calcular por ahorro mensual -->
          <div id="campoAhorroMensual" class="mb-3" style="display:none;">
            <label for="ahorroMensual" class="form-label">Ahorro mensual ($)</label>
            <input type="number" id="ahorroMensual" class="form-control">
          </div>

          <div id="resultadoSimulador" class="alert alert-info mt-3"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="calcularSimulador">Calcular</button>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- Bootstrap JS (bundle con Popper incluido) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7498791314616061"
    crossorigin="anonymous"></script>
  <script src="./static/script/presupuesto.js"></script>
  <script src="./static/script/script.js"></script>
</body>

</html>